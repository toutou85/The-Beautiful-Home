<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ›ï¸ Ø§Ù„Ù…ØªØ¬Ø±</title>
  <link rel="icon" href="favicon.png">
  <style>
    body {
      font-family: Tahoma, sans-serif;
      margin: 0;
      background: #f4f4f4;
    }
    header {
      background: #005f73;
      color: white;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo { height: 40px; }
    .header-buttons a {
      color: white;
      background: #0a9396;
      padding: 8px 12px;
      border-radius: 5px;
      margin-left: 8px;
      text-decoration: none;
    }
    .search-bar, .category-bar {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin: 1rem;
      flex-wrap: wrap;
    }
    .search-bar input {
      width: 250px;
      padding: 0.5rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      padding: 1rem;
    }
    .product {
      background: white;
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      position: relative;
    }
    .product img {
      width: 100%; height: 150px;
      object-fit: cover;
      border-radius: 8px;
    }
    .product .fav {
      position: absolute;
      top: 8px; left: 8px;
      cursor: pointer;
      font-size: 1.2rem;
    }
    .order-btn, .cart-btn {
      display: inline-block;
      margin-top: 10px;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .order-btn { background: #0a9396; color: white; text-decoration: none; }
    .cart-btn { background: orange; color: white; }
    .pagination {
      text-align: center;
      margin: 1rem;
    }
    .pagination button {
      margin: 0 4px;
      padding: 6px 12px;
      border: none;
      background: #ccc;
      border-radius: 5px;
    }
    .pagination .active {
      background: #005f73;
      color: white;
    }
  </style>
</head>
<body><header>
  <img src="logo.png" class="logo" alt="logo">
  <div class="header-buttons">
    <a href="myorders.html">ğŸ“¦ Ø·Ù„Ø¨Ø§ØªÙŠ</a>
    <a href="cart.html">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</a>
    <a href="#" onclick="showFavorites()">â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©</a>
  </div>
</header><div class="search-bar">
  <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...">
  <button onclick="filterProducts()">Ø¨Ø­Ø«</button>
</div><div class="category-bar" id="categoryBar"></div><section class="products" id="productList">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</section>
<div class="pagination" id="pagination"></div><script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRGmRO6TOlY4g8QiNx6jZJPESabHQeKvtGLHgm614oIPdfLXhSeE7YZSdHSvKhLkIvcKSgFcmuJz6gr/pub?output=csv";

let allProducts = [], filteredProducts = [], currentPage = 1, perPage = 12;
let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
let cart = JSON.parse(localStorage.getItem("cart") || "[]");
let categories = new Set();

fetch(sheetURL)
  .then(res => res.text())
  .then(text => {
    const rows = text.trim().split("\n").slice(1);
    allProducts = rows.map(row => {
      const [name, image, price, quantity, category] = row.split(",");
      categories.add(category?.trim());
      return { name: name.trim(), image: image.trim(), price: price.trim(), category: category?.trim() };
    });
    createCategoryButtons();
    displayProducts(allProducts);
  })
  .catch(() => document.getElementById("productList").innerText = "âš ï¸ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª");

function displayProducts(data) {
  const list = document.getElementById("productList");
  const paginated = data.slice((currentPage-1)*perPage, currentPage*perPage);
  list.innerHTML = paginated.map(p => `
    <div class="product">
      <span class="fav" onclick="toggleFavorite('${p.name}')">${favorites.includes(p.name) ? 'â¤ï¸' : 'ğŸ¤'}</span>
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>${p.price} Ø¯Ø¬</p>
      <a href="order.html?product=${encodeURIComponent(p.name)}&price=${encodeURIComponent(p.price)}" class="order-btn">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</a>
      <button class="cart-btn" onclick="addToCart('${p.name}', '${p.price}')">+ Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
    </div>`).join("");
  updatePagination(data);
}

function updatePagination(data) {
  const total = Math.ceil(data.length / perPage);
  const container = document.getElementById("pagination");
  container.innerHTML = "";
  for (let i = 1; i <= total; i++) {
    const btn = document.createElement("button");
    btn.textContent = i;
    if (i === currentPage) btn.className = "active";
    btn.onclick = () => { currentPage = i; displayProducts(data); };
    container.appendChild(btn);
  }
}

function filterProducts() {
  const q = document.getElementById("searchInput").value.toLowerCase();
  filteredProducts = allProducts.filter(p => p.name.toLowerCase().includes(q));
  currentPage = 1;
  displayProducts(filteredProducts);
}

function createCategoryButtons() {
  const bar = document.getElementById("categoryBar");
  bar.innerHTML = `<button onclick="displayProducts(allProducts)">Ø§Ù„ÙƒÙ„</button>`;
  [...categories].forEach(cat => {
    const btn = document.createElement("button");
    btn.textContent = cat;
    btn.onclick = () => {
      const filtered = allProducts.filter(p => p.category === cat);
      currentPage = 1;
      displayProducts(filtered);
    };
    bar.appendChild(btn);
  });
}

function toggleFavorite(name) {
  if (favorites.includes(name)) favorites = favorites.filter(f => f !== name);
  else favorites.push(name);
  localStorage.setItem("favorites", JSON.stringify(favorites));
  displayProducts(filteredProducts.length ? filteredProducts : allProducts);
}

function showFavorites() {
  const favs = allProducts.filter(p => favorites.includes(p.name));
  currentPage = 1;
  displayProducts(favs);
}

function addToCart(name, price) {
  const item = cart.find(i => i.name === name);
  if (item) item.qty++;
  else cart.push({ name, price, qty: 1 });
  localStorage.setItem("cart", JSON.stringify(cart));
  alert("âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©");
}
</script>
<footer>
  <div class="social-icons" style="display: flex; justify-content: center; gap: 15px; margin-bottom: 10px;">
    <a href="https://www.facebook.com/share/1XtjMMUMRw/" target="_blank" title="Facebook">
      <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/facebook.svg" alt="Facebook" width="30" height="30" style="filter: invert(26%) sepia(78%) saturate(2471%) hue-rotate(199deg) brightness(98%) contrast(101%);">
    </a>
    <a href="https://www.instagram.com/tgtmhb99" target="_blank" title="Instagram">
      <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg" alt="Instagram" width="30" height="30" style="filter: invert(41%) sepia(93%) saturate(5234%) hue-rotate(313deg) brightness(91%) contrast(99%);">
    </a>
    <a href="https://vm.tiktok.com/ZMSxkRM6N/" target="_blank" title="TikTok">
      <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg" alt="TikTok" width="30" height="30" style="filter: invert(0%) sepia(10%) saturate(0%) hue-rotate(156deg) brightness(93%) contrast(100%);">
    </a>
  </div>
  <p style="text-align:center; color:white;">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2025</p>
</footer>
</body>
</html>